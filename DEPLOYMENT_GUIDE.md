# ç·šä¸Šå³æ™‚è³“æœéŠæˆ² - éƒ¨ç½²æŒ‡å—

## å°ˆæ¡ˆæ¦‚è¿°

é€™æ˜¯ä¸€å€‹åŸºæ–¼ **React + Express + Socket.IO** çš„å³æ™‚è³“æœéŠæˆ²ç³»çµ±ï¼Œæ”¯æ´ç®¡ç†è€…é–‹çå’Œè§€çœ¾å³æ™‚åŒæ­¥è§€çœ‹ã€‚å°ˆæ¡ˆæ¡ç”¨ **Neo-Brutalismï¼ˆæ–°ç²—ç·ä¸»ç¾©ï¼‰** è¨­è¨ˆé¢¨æ ¼ï¼Œæä¾›æ¸…æ™°æ˜“è®€çš„éŠæˆ²ä»‹é¢ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- **ç®¡ç†è€…ä»‹é¢** (`/admin`)ï¼šä¸»æŒäººå¯ä»¥é»æ“Šè™Ÿç¢¼é€²è¡Œé–‹çï¼Œä¸¦é‡ç½®éŠæˆ²
- **è§€çœ¾ä»‹é¢** (`/`)ï¼šæ¡Œé•·å³æ™‚æŸ¥çœ‹é–‹ççµæœï¼Œè™Ÿç¢¼è‡ªå‹•åŒæ­¥è®Šè‰²
- **å³æ™‚çµ±è¨ˆ**ï¼šé¡¯ç¤ºç•¶å‰åœ¨ç·šäººæ•¸å’Œå·²é¸è™Ÿç¢¼æ•¸é‡
- **å¯¦æ™‚é€šè¨Š**ï¼šä½¿ç”¨ Socket.IO å¯¦ç¾æ‰€æœ‰é€£ç·šç”¨æˆ¶çš„å³æ™‚åŒæ­¥
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼šæ”¯æŒæ¡Œæ©Ÿå’Œæ‰‹æ©Ÿç€è¦½

---

## æŠ€è¡“æ¶æ§‹

### å‰ç«¯æŠ€è¡“æ£§

- **React 19** - UI æ¡†æ¶
- **Tailwind CSS 4** - æ¨£å¼æ¡†æ¶
- **Socket.IO Client 4.8.3** - WebSocket å®¢æˆ¶ç«¯
- **Wouter** - è¼•é‡ç´šè·¯ç”±
- **Vite** - æ‰“åŒ…å·¥å…·

### å¾Œç«¯æŠ€è¡“æ£§

- **Node.js** - é‹è¡Œç’°å¢ƒ
- **Express 4** - Web ä¼ºæœå™¨
- **Socket.IO 4.8.3** - WebSocket ä¼ºæœå™¨
- **HTTP Server** - åŸç”Ÿ HTTP ä¼ºæœå™¨ï¼ˆæ”¯æ´ WebSocket å‡ç´šï¼‰

### å°ˆæ¡ˆçµæ§‹

```
bingo-game/
â”œâ”€â”€ client/                    # å‰ç«¯ç¨‹å¼ç¢¼
â”‚   â”œâ”€â”€ public/               # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # React çµ„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ BingoBoard.tsx    # è³“æœç›¤çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/         # React Context
â”‚   â”‚   â”‚   â””â”€â”€ SocketContext.tsx # Socket.IO é€£ç·šç®¡ç†
â”‚   â”‚   â”œâ”€â”€ pages/            # é é¢çµ„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx          # è§€çœ¾é é¢
â”‚   â”‚   â”‚   â””â”€â”€ Admin.tsx         # ç®¡ç†è€…é é¢
â”‚   â”‚   â”œâ”€â”€ App.tsx           # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ main.tsx          # å…¥å£æª”æ¡ˆ
â”‚   â”‚   â””â”€â”€ index.css         # å…¨åŸŸæ¨£å¼
â”‚   â””â”€â”€ index.html            # HTML æ¨¡æ¿
â”œâ”€â”€ server/                   # å¾Œç«¯ç¨‹å¼ç¢¼
â”‚   â””â”€â”€ _core/
â”‚       â””â”€â”€ index.ts          # ä¼ºæœå™¨ä¸»æª”æ¡ˆï¼ˆåŒ…å« Socket.IO é‚è¼¯ï¼‰
â”œâ”€â”€ package.json              # ä¾è³´é …é…ç½®
â”œâ”€â”€ vite.config.ts            # Vite é…ç½®
â””â”€â”€ tsconfig.json             # TypeScript é…ç½®
```

---

## éƒ¨ç½²å‰æº–å‚™

### 1. ç’°å¢ƒéœ€æ±‚

- **Node.js**: v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **pnpm**: v10.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæˆ–ä½¿ç”¨ npmï¼‰

### 2. å®‰è£ä¾è³´

```bash
pnpm install
```

### 3. ç’°å¢ƒè®Šæ•¸

å‰µå»º `.env` æª”æ¡ˆï¼ˆç”Ÿç”¢ç’°å¢ƒå¯é¸ï¼‰ï¼š

```env
NODE_ENV=production
PORT=3000
```

---

## æœ¬åœ°æ¸¬è©¦

### é–‹ç™¼æ¨¡å¼

```bash
pnpm dev
```

è¨ªå• `http://localhost:3000` æŸ¥çœ‹è§€çœ¾é é¢ï¼Œè¨ªå• `http://localhost:3000/admin` æŸ¥çœ‹ç®¡ç†è€…é é¢ã€‚

### ç”Ÿç”¢æ¨¡å¼æ¸¬è©¦

```bash
# 1. æ‰“åŒ…å‰ç«¯å’Œå¾Œç«¯
pnpm build

# 2. å•Ÿå‹•ç”Ÿç”¢ä¼ºæœå™¨
pnpm start
```

---

## éƒ¨ç½²åˆ°å¤–éƒ¨å¹³å°

### é¸é … 1ï¼šRender.comï¼ˆæ¨è–¦ï¼‰

Render æä¾›å…è²»æ–¹æ¡ˆï¼Œæ”¯æ´ WebSocketï¼Œé©åˆå³æ™‚æ‡‰ç”¨ã€‚

#### æ­¥é©Ÿ

1. **å‰µå»º GitHub Repository**
   - å°‡å°ˆæ¡ˆæ¨é€åˆ° GitHub

2. **é€£æ¥ Render**
   - ç™»å…¥ [Render.com](https://render.com)
   - é»æ“Šã€ŒNew +ã€â†’ã€ŒWeb Serviceã€
   - é€£æ¥æ‚¨çš„ GitHub repository

3. **é…ç½®æœå‹™**
   - **Name**: `bingo-game`
   - **Environment**: `Node`
   - **Build Command**: `pnpm install && pnpm build`
   - **Start Command**: `pnpm start`
   - **Plan**: Free

4. **ç’°å¢ƒè®Šæ•¸**ï¼ˆå¯é¸ï¼‰
   - `NODE_ENV`: `production`
   - `PORT`: `3000`ï¼ˆRender æœƒè‡ªå‹•è¨­ç½®ï¼‰

5. **éƒ¨ç½²**
   - é»æ“Šã€ŒCreate Web Serviceã€
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆç´„ 3-5 åˆ†é˜ï¼‰

6. **æ¸¬è©¦**
   - è¨ªå• Render æä¾›çš„ç¶²å€ï¼ˆä¾‹å¦‚ `https://bingo-game.onrender.com`ï¼‰
   - ç¢ºèª Socket.IO é€£ç·šç‹€æ…‹é¡¯ç¤ºç‚ºç¶ è‰²ã€ŒLIVE CONNECTIONã€

---

### é¸é … 2ï¼šRailway.app

Railway æä¾› $5/æœˆ å…è²»é¡åº¦ï¼Œæ”¯æ´ WebSocketã€‚

#### æ­¥é©Ÿ

1. **å‰µå»ºå°ˆæ¡ˆ**
   - ç™»å…¥ [Railway.app](https://railway.app)
   - é»æ“Šã€ŒNew Projectã€â†’ã€ŒDeploy from GitHub repoã€

2. **é…ç½®**
   - é¸æ“‡æ‚¨çš„ repository
   - Railway æœƒè‡ªå‹•æª¢æ¸¬ Node.js å°ˆæ¡ˆ

3. **ç’°å¢ƒè®Šæ•¸**
   - `NODE_ENV`: `production`

4. **éƒ¨ç½²**
   - Railway æœƒè‡ªå‹•åŸ·è¡Œ `pnpm install` å’Œ `pnpm build`
   - å•Ÿå‹•å‘½ä»¤æœƒè‡ªå‹•ä½¿ç”¨ `pnpm start`

5. **ç²å–ç¶²å€**
   - åœ¨ Settings â†’ Networking ä¸­ç”Ÿæˆå…¬é–‹ç¶²å€

---

### é¸é … 3ï¼šFly.io

Fly.io æä¾›å…è²»æ–¹æ¡ˆï¼Œæ”¯æ´å…¨çƒ CDNã€‚

#### æ­¥é©Ÿ

1. **å®‰è£ Fly CLI**
   ```bash
   curl -L https://fly.io/install.sh | sh
   ```

2. **ç™»å…¥**
   ```bash
   flyctl auth login
   ```

3. **åˆå§‹åŒ–å°ˆæ¡ˆ**
   ```bash
   flyctl launch
   ```
   - é¸æ“‡ app åç¨±
   - é¸æ“‡å€åŸŸï¼ˆå»ºè­°é¸æ“‡ Singaporeï¼‰
   - ä¸éœ€è¦ PostgreSQL è³‡æ–™åº«

4. **é…ç½® `fly.toml`**ï¼ˆè‡ªå‹•ç”Ÿæˆï¼Œç¢ºèªä»¥ä¸‹å…§å®¹ï¼‰
   ```toml
   app = "bingo-game"
   
   [build]
     builder = "heroku/buildpacks:20"
   
   [[services]]
     internal_port = 3000
     protocol = "tcp"
   
     [[services.ports]]
       handlers = ["http"]
       port = 80
   
     [[services.ports]]
       handlers = ["tls", "http"]
       port = 443
   ```

5. **éƒ¨ç½²**
   ```bash
   flyctl deploy
   ```

6. **æ¸¬è©¦**
   ```bash
   flyctl open
   ```

---

## æ ¸å¿ƒç¨‹å¼ç¢¼èªªæ˜

### 1. Socket.IO ä¼ºæœå™¨ï¼ˆ`server/_core/index.ts`ï¼‰

é€™æ˜¯æ•´å€‹å°ˆæ¡ˆçš„æ ¸å¿ƒï¼Œè² è²¬ï¼š
- å‰µå»º HTTP ä¼ºæœå™¨å’Œ Socket.IO ä¼ºæœå™¨
- ç®¡ç†éŠæˆ²ç‹€æ…‹ï¼ˆå·²é»æ“Šçš„è™Ÿç¢¼ã€åœ¨ç·šäººæ•¸ï¼‰
- è™•ç†å®¢æˆ¶ç«¯é€£ç·šã€æ–·ç·šã€è™Ÿç¢¼é»æ“Šã€éŠæˆ²é‡ç½®äº‹ä»¶
- å»£æ’­çµ±è¨ˆè³‡è¨Šçµ¦æ‰€æœ‰å®¢æˆ¶ç«¯

**é—œéµé…ç½®**ï¼š
```typescript
const io = new Server(server, {
  cors: {
    origin: "*", // å…è¨±æ‰€æœ‰ä¾†æº
    methods: ["GET", "POST"],
  },
  transports: ['websocket', 'polling'], // æ”¯æ´ WebSocket å’Œ Polling
});
```

### 2. Socket.IO å®¢æˆ¶ç«¯ï¼ˆ`client/src/contexts/SocketContext.tsx`ï¼‰

è² è²¬ï¼š
- å»ºç«‹èˆ‡ä¼ºæœå™¨çš„ Socket.IO é€£ç·š
- ç›£è½ä¼ºæœå™¨å»£æ’­çš„äº‹ä»¶ï¼ˆåˆå§‹ç‹€æ…‹ã€è™Ÿç¢¼æ›´æ–°ã€çµ±è¨ˆæ›´æ–°ã€éŠæˆ²é‡ç½®ï¼‰
- æä¾› Context API ä¾›å…¶ä»–çµ„ä»¶ä½¿ç”¨

**é—œéµé…ç½®**ï¼š
```typescript
const newSocket = io(window.location.origin, {
  transports: ['websocket', 'polling'],
  reconnection: true,
  reconnectionDelay: 1000,
  reconnectionAttempts: 5,
  autoConnect: true,
});
```

### 3. è³“æœç›¤çµ„ä»¶ï¼ˆ`client/src/components/BingoBoard.tsx`ï¼‰

è² è²¬ï¼š
- æ¸²æŸ“ 1-75 çš„è™Ÿç¢¼æ ¼å­
- æ ¹æ“š `clickedNumbers` ç‹€æ…‹é¡¯ç¤ºä¸åŒé¡è‰²
- åœ¨ç®¡ç†è€…æ¨¡å¼ä¸‹æ”¯æ´é»æ“Šè™Ÿç¢¼

### 4. è§€çœ¾é é¢ï¼ˆ`client/src/pages/Home.tsx`ï¼‰

é¡¯ç¤ºï¼š
- é€£ç·šç‹€æ…‹ï¼ˆç¶ è‰² LIVE CONNECTION æˆ–ç´…è‰² DISCONNECTEDï¼‰
- åœ¨ç·šäººæ•¸å’Œå·²é¸è™Ÿç¢¼æ•¸é‡
- æœ€æ–°é–‹å‡ºçš„è™Ÿç¢¼
- è³“æœç›¤ï¼ˆä¸å¯é»æ“Šï¼‰

### 5. ç®¡ç†è€…é é¢ï¼ˆ`client/src/pages/Admin.tsx`ï¼‰

é¡¯ç¤ºï¼š
- ç³»çµ±ç‹€æ…‹ï¼ˆç¶ è‰² SYSTEM ONLINE æˆ–ç´…è‰² SYSTEM OFFLINEï¼‰
- åœ¨ç·šäººæ•¸å’Œå·²é¸è™Ÿç¢¼æ•¸é‡
- è³“æœç›¤ï¼ˆå¯é»æ“Šé–‹çï¼‰
- RESET GAME æŒ‰éˆ•ï¼ˆæ¸…ç©ºæ‰€æœ‰è™Ÿç¢¼ï¼‰

---

## å¸¸è¦‹å•é¡Œæ’æŸ¥

### 1. Socket.IO é€£ç·šå¤±æ•—ï¼ˆé¡¯ç¤º DISCONNECTEDï¼‰

**å¯èƒ½åŸå› **ï¼š
- ä¼ºæœå™¨æ²’æœ‰æ­£ç¢ºå•Ÿå‹•
- é˜²ç«ç‰†é˜»æ“‹ WebSocket é€£ç·š
- CORS é…ç½®å•é¡Œ

**è§£æ±ºæ–¹æ³•**ï¼š
- æª¢æŸ¥ä¼ºæœå™¨æ—¥èªŒï¼Œç¢ºèª `[Socket.IO] Server initialized and ready` è¨Šæ¯
- ç¢ºèª `server/_core/index.ts` ä¸­çš„ CORS é…ç½®ç‚º `origin: "*"`
- åœ¨ç€è¦½å™¨ Console ä¸­æŸ¥çœ‹éŒ¯èª¤è¨Šæ¯

### 2. è™Ÿç¢¼é»æ“Šå¾Œæ²’æœ‰åŒæ­¥

**å¯èƒ½åŸå› **ï¼š
- Socket.IO äº‹ä»¶åç¨±ä¸åŒ¹é…
- ä¼ºæœå™¨æ²’æœ‰æ­£ç¢ºå»£æ’­äº‹ä»¶

**è§£æ±ºæ–¹æ³•**ï¼š
- æª¢æŸ¥ä¼ºæœå™¨æ—¥èªŒï¼Œç¢ºèª `[Socket.IO] Number X clicked` è¨Šæ¯
- ç¢ºèªå®¢æˆ¶ç«¯ç›£è½çš„äº‹ä»¶åç¨±èˆ‡ä¼ºæœå™¨å»£æ’­çš„ä¸€è‡´

### 3. åœ¨ç·šäººæ•¸ä¸æº–ç¢º

**å¯èƒ½åŸå› **ï¼š
- å®¢æˆ¶ç«¯æ–·ç·šå¾Œæ²’æœ‰æ­£ç¢ºè§¸ç™¼ `disconnect` äº‹ä»¶

**è§£æ±ºæ–¹æ³•**ï¼š
- é€™æ˜¯æ­£å¸¸ç¾è±¡ï¼ŒWebSocket é€£ç·šå¯èƒ½æœ‰å»¶é²
- å¯ä»¥åœ¨ä¼ºæœå™¨ç«¯æ·»åŠ å¿ƒè·³æª¢æ¸¬æ©Ÿåˆ¶

---

## å¾ŒçºŒæ”¹é€²å»ºè­°

1. **é–‹çæ­·å²è¨˜éŒ„**ï¼šåœ¨ç®¡ç†è€…ä»‹é¢é¡¯ç¤ºå·²é–‹å‡ºè™Ÿç¢¼çš„æ™‚é–“åºåˆ—
2. **QR Code åˆ†äº«åŠŸèƒ½**ï¼šåœ¨ç®¡ç†è€…ä»‹é¢åŠ å…¥ã€Œç”Ÿæˆ QR Codeã€æŒ‰éˆ•ï¼Œæ–¹ä¾¿æ¡Œé•·æƒæ
3. **éŸ³æ•ˆå›é¥‹**ï¼šç•¶è™Ÿç¢¼é–‹å‡ºæ™‚åŠ å…¥éŸ³æ•ˆï¼Œæå‡éŠæˆ²è‡¨å ´æ„Ÿ
4. **æŒä¹…åŒ–å­˜å„²**ï¼šå°‡éŠæˆ²ç‹€æ…‹å­˜å„²åˆ°è³‡æ–™åº«ï¼Œæ”¯æ´ä¼ºæœå™¨é‡å•Ÿå¾Œæ¢å¾©
5. **å¤šæˆ¿é–“æ”¯æ´**ï¼šå…è¨±å¤šå€‹éŠæˆ²åŒæ™‚é€²è¡Œï¼Œæ¯å€‹æˆ¿é–“ç¨ç«‹ç®¡ç†

---

## æˆæ¬Šèˆ‡æ”¯æ´

æœ¬å°ˆæ¡ˆç”± **Manus AI** é–‹ç™¼ï¼Œæ¡ç”¨ MIT æˆæ¬Šã€‚å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹è¯ç¹«å°ˆæ¡ˆç¶­è­·è€…ã€‚

---

**ç¥æ‚¨éƒ¨ç½²é †åˆ©ï¼ğŸ‰**
